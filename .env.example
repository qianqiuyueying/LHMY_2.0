# LHMY_2.0 environment variables example
# Copy this file to .env and fill in real values.
# NOTE: Never use placeholder secrets in production.

############################
# App
############################
APP_NAME=LHMY_Health_Service_Platform
APP_ENV=development

# Ports exposed by docker compose
BACKEND_PORT=8000
NGINX_PORT=80

# CORS origins (comma-separated) for local frontend dev
CORS_ORIGINS=http://localhost:5173,http://localhost:5174,http://localhost:5175

# Request-Id header name
REQUEST_ID_HEADER=X-Request-Id

############################
# MySQL (used by backend + alembic; mysql container init uses MYSQL_* below)
############################
MYSQL_HOST=mysql
MYSQL_PORT=3306
MYSQL_ROOT_PASSWORD=change_me_root
MYSQL_DATABASE=lhmy
MYSQL_USER=lhmy
MYSQL_PASSWORD=change_me_user

############################
# Redis (cache / sms-code / token blacklist / idempotency)
############################
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

############################
# RabbitMQ (docker compose uses these to init rabbitmq container)
############################
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_DEFAULT_USER=lhmy
RABBITMQ_DEFAULT_PASS=change_me_rabbitmq

############################
# JWT (USER)
############################
JWT_SECRET=change_me_jwt_secret
JWT_ALGORITHM=HS256
JWT_EXPIRE_SECONDS=604800

############################
# Admin auth (management console)
############################
# Dev/Test initial admin account (created automatically on startup/login if set)
ADMIN_INIT_USERNAME=
ADMIN_INIT_PASSWORD=

# Admin JWT (isolated from USER JWT)
JWT_SECRET_ADMIN=change_me_jwt_secret_admin
JWT_ALGORITHM_ADMIN=HS256
JWT_ADMIN_ACCESS_EXPIRE_SECONDS=7200

############################
# Provider auth (provider console)
############################
# Provider JWT (isolated from USER/Admin JWT)
JWT_SECRET_PROVIDER=change_me_jwt_secret_provider
JWT_ALGORITHM_PROVIDER=HS256
JWT_PROVIDER_ACCESS_EXPIRE_SECONDS=7200

############################
# WeChat mini-program login (code -> openid/unionid)
############################
WECHAT_APPID=
WECHAT_SECRET=

# Optional: use your own code-exchange service instead of calling WeChat directly
WECHAT_CODE_EXCHANGE_SERVICE_URL=

############################
# WeChat Pay (v3 notify)
############################
WECHAT_PAY_API_V3_KEY=
WECHAT_PAY_PLATFORM_CERT_SERIAL=
# PEM text or file path to the platform certificate
WECHAT_PAY_PLATFORM_CERT_PEM_OR_PATH=

############################
# Security keys (must change)
############################
ENTITLEMENT_QR_SIGN_SECRET=change_me_entitlement_qr_sign_secret
# NOTE: env var name is fixed in code: DEALER_SIGN_SECRET
DEALER_SIGN_SECRET=change_me_dealer_sign_secret


# ===== 图片上传 / 资产库（图床/CDN 入口）=====
# 为空：返回相对路径 /static/uploads/...（由后端 StaticFiles + nginx 反代）
# 设为域名：返回 https://your-domain.com/static/uploads/...
ASSETS_PUBLIC_BASE_URL=
# 预留：LOCAL/OSS（本期默认 LOCAL）
ASSETS_STORAGE=LOCAL


############################
# Testing
############################
# Integration tests run only when set to 1
RUN_INTEGRATION_TESTS=0
