# LHMY_2.0 环境变量示例
# 复制此文件为 .env 并填入真实值
# 注意：生产环境请勿使用占位符密钥

############################
# 应用配置
############################
APP_NAME=LHMY_Health_Service_Platform
APP_ENV=development

# Docker Compose 暴露的端口
BACKEND_PORT=8000
NGINX_PORT=80

# CORS 允许的源（逗号分隔，用于本地前端开发）
CORS_ORIGINS=http://localhost:5173,http://localhost:5174,http://localhost:5175

# Request-Id 请求头名称
REQUEST_ID_HEADER=X-Request-Id

############################
# MySQL（后端和 alembic 使用；mysql 容器初始化使用下面的 MYSQL_* 变量）
############################
MYSQL_HOST=mysql
MYSQL_PORT=3306
MYSQL_ROOT_PASSWORD=change_me_root
MYSQL_DATABASE=lhmy
MYSQL_USER=lhmy
MYSQL_PASSWORD=change_me_user

############################
# Redis（缓存 / 短信验证码 / token 黑名单 / 幂等性）
############################
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

############################
# RabbitMQ（Docker Compose 使用这些变量初始化 rabbitmq 容器）
############################
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_DEFAULT_USER=lhmy
RABBITMQ_DEFAULT_PASS=change_me_rabbitmq

############################
# JWT（用户端）
############################
JWT_SECRET=change_me_jwt_secret
JWT_ALGORITHM=HS256
JWT_EXPIRE_SECONDS=604800

############################
# 管理员认证（管理后台）
############################
# 开发/测试环境初始管理员账号（如果设置，将在启动/登录时自动创建）
ADMIN_INIT_USERNAME=
ADMIN_INIT_PASSWORD=

# 管理员 JWT（与用户端 JWT 隔离）
JWT_SECRET_ADMIN=change_me_jwt_secret_admin
JWT_ALGORITHM_ADMIN=HS256
JWT_ADMIN_ACCESS_EXPIRE_SECONDS=7200

############################
# 服务商认证（服务商后台）
############################
# 服务商 JWT（与用户端/管理员 JWT 隔离）
JWT_SECRET_PROVIDER=change_me_jwt_secret_provider
JWT_ALGORITHM_PROVIDER=HS256
JWT_PROVIDER_ACCESS_EXPIRE_SECONDS=7200

############################
# H5 匿名购卡 -> 小程序绑定（v1）
############################
# bind_token 有效期（秒，默认 24 小时）
BIND_TOKEN_EXPIRE_SECONDS=86400

############################
# 微信公众号（H5 JS-SDK：wx-open-launch-weapp）
############################
# 后端用于获取 access_token/jsapi_ticket 并为当前页面 URL 签名以配置 wx.config
WECHAT_H5_APPID=
WECHAT_H5_SECRET=

############################
# 微信小程序登录（code -> openid/unionid）
############################
WECHAT_APPID=
WECHAT_SECRET=

# 可选：使用自己的 code 兑换服务，而不是直接调用微信接口
WECHAT_CODE_EXCHANGE_SERVICE_URL=

############################
# 微信支付（v3）
############################
WECHAT_PAY_API_V3_KEY=
WECHAT_PAY_PLATFORM_CERT_SERIAL=
# 平台证书的 PEM 文本或文件路径
WECHAT_PAY_PLATFORM_CERT_PEM_OR_PATH=

# 商户号（用于 H5 购卡的 /api/v1/orders/{id}/pay 接口）
WECHAT_PAY_MCH_ID=
# H5 MWEB 订单需要 appid（请查看您的商户绑定关系）
WECHAT_PAY_APPID=
WECHAT_PAY_MCH_CERT_SERIAL=
WECHAT_PAY_MCH_PRIVATE_KEY_PEM_OR_PATH=
# 生产环境必须是公网 https 地址
WECHAT_PAY_NOTIFY_URL=
WECHAT_PAY_GATEWAY_BASE_URL=https://api.mch.weixin.qq.com

############################
# 安全密钥（必须修改）
############################
ENTITLEMENT_QR_SIGN_SECRET=change_me_entitlement_qr_sign_secret
# 注意：环境变量名称在代码中固定为：DEALER_SIGN_SECRET
DEALER_SIGN_SECRET=change_me_dealer_sign_secret


# ===== 图片上传 / 资产库（图床/CDN 入口）=====
# 为空：返回相对路径 /static/uploads/...（由后端 StaticFiles + nginx 反代）
# 设为域名：返回 https://your-domain.com/static/uploads/...
ASSETS_PUBLIC_BASE_URL=
# 预留：LOCAL/OSS（本期默认 LOCAL）
ASSETS_STORAGE=LOCAL


############################
# 测试
############################
# 集成测试仅在设置为 1 时运行
RUN_INTEGRATION_TESTS=0