<!--pages/booking/date-slot-select/date-slot-select.wxml-->
<view class="container">
  <!-- 日期选择 -->
  <view class="card">
    <view class="section-title">选择日期</view>
    <view class="dates-grid">
      <view 
        class="date-item {{selectedDate === item ? 'selected' : ''}}"
        wx:for="{{dateList}}"
        wx:key="*this"
        data-date="{{item}}"
        bindtap="onDateSelect"
      >
        <text>{{item}}</text>
      </view>
    </view>
  </view>

  <!-- 时段选择 -->
  <view class="card" wx:if="{{selectedDate}}">
    <view class="section-title">选择时段</view>
    <view class="slots-grid">
      <view 
        class="slot-item {{selectedSlot === item.timeSlot ? 'selected' : ''}} {{item.remainingCapacity <= 0 ? 'disabled' : ''}}"
        wx:for="{{slots}}"
        wx:key="timeSlot"
        data-slot="{{item.timeSlot}}"
        bindtap="onSlotSelect"
      >
        <text class="slot-time">{{item.timeSlot}}</text>
        <text class="slot-capacity">剩余{{item.remainingCapacity}}个</text>
      </view>
    </view>
  </view>
</view>

<!-- 底部提交按钮 -->
<view class="bottom-cta-bar">
  <button class="btn btn-primary" bindtap="onSubmit" disabled="{{!selectedDate || !selectedSlot}}">
    提交预约
  </button>
</view>
