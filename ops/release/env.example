# LHMY 2.0 (single-host docker compose) env template
#
# 说明：
# - 生产环境请务必替换所有 change_me_* 默认密钥，否则后端启动门禁会拒绝启动（APP_ENV=production）。
# - 域名/HTTPS/Nginx 反代：在 nginx/conf.d 里启用 https 配置，并把证书挂载到 nginx 容器。
# - 推荐以**项目根目录 `env.example`** 为唯一来源；本文件仅保留 compose 发布场景的参考
#

APP_ENV=development

# --- MySQL ---
MYSQL_ROOT_PASSWORD=change_me_mysql_root_password
MYSQL_DATABASE=lhmy
MYSQL_USER=lhmy
MYSQL_PASSWORD=change_me_mysql_password
MYSQL_PORT=3306

# --- Redis ---
REDIS_PORT=6379

# --- RabbitMQ ---
RABBITMQ_DEFAULT_USER=guest
RABBITMQ_DEFAULT_PASS=guest
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# --- Backend ---
BACKEND_PORT=8000

# CORS（逗号分隔）
# 生产示例：CORS_ORIGINS=https://admin.example.com,https://www.example.com
CORS_ORIGINS=

# --- Nginx ---
NGINX_PORT=80
# 如启用 HTTPS（nginx/conf.d/https.conf），建议映射 443
NGINX_HTTPS_PORT=443

# Website build-time env (Vite)
VITE_API_BASE=/api

# --- JWT / secrets (production 必须替换) ---
JWT_SECRET=change_me_jwt_secret
JWT_SECRET_ADMIN=change_me_jwt_secret_admin
JWT_SECRET_PROVIDER=change_me_jwt_secret_provider
JWT_SECRET_DEALER=change_me_jwt_secret_dealer

ENTITLEMENT_QR_SIGN_SECRET=change_me_entitlement_qr_sign_secret
DEALER_SIGN_SECRET=change_me_dealer_sign_secret

# --- H5 anonymous purchase -> mini-program binding (v1) ---
# bind_token TTL seconds (default 24h)
BIND_TOKEN_EXPIRE_SECONDS=86400

# --- WeChat Official Account (H5 JS-SDK, for wx-open-launch-weapp) ---
WECHAT_H5_APPID=
WECHAT_H5_SECRET=

# --- WeChat Mini Program ---
WECHAT_APPID=
WECHAT_SECRET=
WECHAT_CODE_EXCHANGE_SERVICE_URL=

# --- WeChat Pay (v3) ---
WECHAT_PAY_API_V3_KEY=
WECHAT_PAY_PLATFORM_CERT_SERIAL=
WECHAT_PAY_PLATFORM_CERT_PEM_OR_PATH=

WECHAT_PAY_MCH_ID=
WECHAT_PAY_APPID=
WECHAT_PAY_MCH_CERT_SERIAL=
WECHAT_PAY_MCH_PRIVATE_KEY_PEM_OR_PATH=

# 生产必须是公网 https（反代域名）
WECHAT_PAY_NOTIFY_URL=

# --- Admin initial account (optional) ---
ADMIN_INIT_USERNAME=
ADMIN_INIT_PASSWORD=

# --- Provider init (dev/test optional) ---
PROVIDER_INIT_USERNAME=
PROVIDER_INIT_PASSWORD=
PROVIDER_INIT_PROVIDER_NAME=
PROVIDER_STAFF_INIT_USERNAME=
PROVIDER_STAFF_INIT_PASSWORD=

# --- Dealer init (dev/test optional) ---
DEALER_INIT_USERNAME=
DEALER_INIT_PASSWORD=
DEALER_INIT_DEALER_NAME=


